---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: &chart csi-driver-nfs
  namespace: system
spec:
  interval: 5m
  chart:
    spec:
      chart: *chart
      version: 4.3.0
      sourceRef:
        kind: HelmRepository
        name: csi-driver-nfs
        namespace: flux-system
  values:
    image:
      nfs:
          repository: registry.k8s.io/sig-storage/nfsplugin
          tag: v4.2.0
          pullPolicy: IfNotPresent
      csiProvisioner:
          repository: registry.k8s.io/sig-storage/csi-provisioner
          tag: v3.5.0
          pullPolicy: IfNotPresent
      csiSnapshotter:
          repository: registry.k8s.io/sig-storage/csi-snapshotter
          tag: v6.2.2
          pullPolicy: IfNotPresent
      livenessProbe:
          repository: registry.k8s.io/sig-storage/livenessprobe
          tag: v2.10.0
          pullPolicy: IfNotPresent
      nodeDriverRegistrar:
          repository: registry.k8s.io/sig-storage/csi-node-driver-registrar
          tag: v2.8.0
          pullPolicy: IfNotPresent
      externalSnapshotter:
          repository: registry.k8s.io/sig-storage/snapshot-controller
          tag: v6.2.2
          pullPolicy: IfNotPresent
    controller:
      replicas: 2
    feature:
      enableFSGroupPolicy: true